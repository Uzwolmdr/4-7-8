<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-7-8 Breathing Exercise | Relax & Reduce Anxiety</title>
  <meta name="description" content="Practice the 4-7-8 breathing technique with a guided animation and audio to relax, reduce anxiety, and improve sleep.">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
      color: white;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      margin-top: 20px;
      font-size: 1.8rem;
    }

    .breathing-section {
      position: relative;
      margin-top: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 70vh;
      flex-direction: column;
    }

    .counter {
      position: absolute;
      top: 10px;
      width: 100%;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, #4facfe, #00f2fe);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 4s ease-in-out;
    }

    .instruction {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: bold;
    }

    /* Donation panel */
    .donate-panel {
      position: fixed;
      bottom: 10px;
      right: 10px;
      left: 10px;
      max-width: 320px;
      margin: auto;
      background: #1e1e1e;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      overflow: hidden;
      color: white;
      font-family: sans-serif;
      transition: max-height 0.3s ease, transform 0.3s ease;
      z-index: 2000;
    }

    .donate-header {
      background: #2a2a2a;
      padding: 10px 15px;
      font-size: 16px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    .donate-content {
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .donate-content button {
      background: #ff5a5f;
      border: none;
      color: white;
      font-weight: bold;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .donate-content button:hover {
      background: #e14c50;
    }

    .donate-panel.collapsed {
      max-height: 50px;
    }
    .donate-panel.collapsed .donate-content {
      display: none;
    }

    .toggle-icon {
      transition: transform 0.3s ease;
    }
    .donate-panel.collapsed .toggle-icon {
      transform: rotate(180deg);
    }

    @media (max-width: 480px) {
      .circle {
        width: 60vw;
        height: 60vw;
      }
    }
  </style>
</head>
<body>
  <h1>4-7-8 Breathing Technique</h1>

  <div class="breathing-section">
    <div class="counter" id="counter">Get ready...</div>
    <div class="circle" id="circle"></div>
    <div class="instruction" id="instruction">Press Start</div>
  </div>

  <!-- Collapsible Donation Panel -->
  <div class="donate-panel collapsed" id="donatePanel">
    <div class="donate-header" onclick="toggleDonate()">
      <span>‚ù§Ô∏è Support Me</span>
      <span class="toggle-icon">‚ñ≤</span>
    </div>
    <div class="donate-content">
      <h3>If this helped you üôè</h3>
      <p>Choose a donation amount:</p>
      <button>$1</button>
      <button>$5</button>
      <button>$10</button>
      <button>Custom</button>
    </div>
  </div>

  <!-- Background Music -->
  <audio id="bg-music" loop>
    <source src="path/to/your/tibetan-bowls-and-rain.mp3" type="audio/mpeg">
  </audio>

  <script>
    const circle = document.getElementById("circle");
    const instruction = document.getElementById("instruction");
    const counter = document.getElementById("counter");
    const bgMusic = document.getElementById("bg-music");

    const phases = [
      { label: "Inhale through your nose", duration: 4, scale: window.innerWidth < 480 ? 1.2 : 1.4 },
      { label: "Hold your breath", duration: 7, scale: window.innerWidth < 480 ? 1.25 : 1.45 },
      { label: "Exhale through your mouth making a whoosh sound", duration: 8, scale: 1 }
    ];

    let phaseIndex = 0;
    let timeLeft = phases[phaseIndex].duration;

    function startBreathing() {
      bgMusic.play().catch(() => {}); // try play, ignore block
      instruction.textContent = phases[phaseIndex].label;
      circle.style.transform = `scale(${phases[phaseIndex].scale})`;

      counter.textContent = timeLeft;

      const timer = setInterval(() => {
        timeLeft--;
        if (timeLeft > 0) {
          counter.textContent = timeLeft;
        } else {
          phaseIndex = (phaseIndex + 1) % phases.length;
          timeLeft = phases[phaseIndex].duration;
          instruction.textContent = phases[phaseIndex].label;
          circle.style.transform = `scale(${phases[phaseIndex].scale})`;
          counter.textContent = timeLeft;
        }
      }, 1000);
    }

    circle.addEventListener("click", startBreathing);

    // Collapsible donation panel
    function toggleDonate() {
      document.getElementById("donatePanel").classList.toggle("collapsed");
    }
  </script>
</body>
</html>
